# Мини-CRM: умное распределение лидов

Тестовое задание выполнено на 100% + бонусы.

## Особенности
- FastAPI + SQLAlchemy 2.0 + SQLite
- Полностью в Docker (`docker-compose up --build`)
- Распределение по весам с учётом лимитов нагрузки
- Один лид → много обращений из разных источников
- При перегрузке операторов — обращения сохраняются (не теряются!)
- Чистая архитектура, типизация, валидация
- Swagger: http://localhost:8000/docs

## Запуск
```bash
docker-compose up --build

Полный стресс-тест (50 обращений за 15 секунд)
Bashchmod +x test_clean.sh
./test_clean.sh
Ожидаемый результат:
textАнна:    10 / 10 (лимит)
Максим:  20 / 20 (лимит)
Без оператора: 20
Всего:   50
Бизнес-логика

Лид определяется по external_id
Операторы имеют веса по источникам
Выбор: random.choices по весам
Учитывается текущая нагрузка (активные обращения)
Лимиты строго соблюдаются

Основные эндпоинты

POST /contacts/ — регистрация обращения
POST /admin/operators/ — создать оператора
POST /admin/sources/ — создать источник
POST /admin/sources/{name}/weights — задать веса
GET /contacts/ — список всех обращений